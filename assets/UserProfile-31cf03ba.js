import{_ as C,C as y,u as x,g as b,d as k,c as u,h as S,o as l,a as d,b as s,q as D,s as L,v as w,i as m,w as _,t as n,j as g,F as U,r as B,m as I,n as N}from"./index-f79c51ae.js";const T={name:"UserProfile",components:{ColorButton:y},setup(){const r=x(),e=b(),c=k(""),o=u(()=>r.getters.isLoggedIn),p=u(()=>r.state.user),f=u(()=>r.state.gameState),i=Object.values(I),t=()=>{c.value.trim()&&(r.dispatch("login",{name:c.value.trim()}),e.push("/"))},h=()=>{r.commit("SET_USER",null),e.push("/")},P=()=>{confirm("确定要重置所有游戏进度吗？这将清除你的冒险记录。")&&r.dispatch("resetGame")},v=a=>r.getters.getUserProgress(a);return{username:c,isLoggedIn:o,user:p,gameState:f,locations:i,handleLogin:t,logout:h,resetProgress:P,getProgress:v,getProgressPercent:a=>v(a).step/3*100,formatDate:a=>new Date(a).toLocaleDateString("zh-CN")}}},V={class:"user-profile"},j={class:"container"},E={key:0,class:"login-section"},q={class:"login-form"},z={class:"form-group"},F={key:1,class:"profile-section"},M={class:"user-info"},R={class:"avatar"},A={class:"user-details"},G={class:"score"},O={class:"progress-section"},H={class:"location-progress"},J={class:"location-info"},K={class:"location-icon"},Q={class:"location-name"},W={class:"progress-display"},X={class:"progress-bar"},Y={class:"progress-text"},Z={class:"profile-actions"};function $(r,e,c,o,p,f){const i=S("ColorButton");return l(),d("div",V,[s("div",j,[e[9]||(e[9]=s("div",{class:"profile-header"},[s("h1",null,"👤 个人中心"),s("p",null,"管理你的冒险档案和游戏进度")],-1)),o.isLoggedIn?(l(),d("div",F,[s("div",M,[s("div",R,n(o.user.name.charAt(0).toUpperCase()),1),s("div",A,[s("h2",null,n(o.user.name),1),s("p",null,"加入时间: "+n(o.formatDate(o.user.joinDate)),1),s("p",G,[e[5]||(e[5]=g("冒险积分: ",-1)),s("strong",null,n(o.user.score),1)])])]),s("div",O,[e[6]||(e[6]=s("h3",null,"冒险进度",-1)),s("div",H,[(l(!0),d(U,null,B(o.locations,t=>(l(),d("div",{key:t.name,class:"progress-item"},[s("div",J,[s("span",K,n(t.icon),1),s("span",Q,n(t.name),1)]),s("div",W,[s("div",X,[s("div",{class:"progress-fill",style:N({width:o.getProgressPercent(t.name)+"%"})},null,4)]),s("span",Y,n(o.getProgress(t.name).step)+"/3 ",1)])]))),128))])]),s("div",Z,[m(i,{color:"blue",onClick:o.resetProgress},{default:_(()=>[...e[7]||(e[7]=[g(" 🔄 重置进度 ",-1)])]),_:1},8,["onClick"]),m(i,{color:"red",onClick:o.logout},{default:_(()=>[...e[8]||(e[8]=[g(" 🚪 退出登录 ",-1)])]),_:1},8,["onClick"])])])):(l(),d("div",E,[s("div",q,[e[4]||(e[4]=s("h2",null,"登录/注册",-1)),s("form",{onSubmit:e[1]||(e[1]=D((...t)=>o.handleLogin&&o.handleLogin(...t),["prevent"]))},[s("div",z,[e[2]||(e[2]=s("label",{for:"username"},"冒险者名称:",-1)),L(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),type:"text",required:"",placeholder:"输入你的冒险者名称",maxlength:"20"},null,512),[[w,o.username]])]),m(i,{type:"submit",color:"green",width:"100%"},{default:_(()=>[...e[3]||(e[3]=[g(" 🚀 开始冒险 ",-1)])]),_:1})],32)])]))])])}const rs=C(T,[["render",$],["__scopeId","data-v-376070fb"]]);export{rs as default};
